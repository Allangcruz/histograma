// 1 - Ler a imagem, informando o caminho fisico onde a mesma se encontra, deacordo com a extensao do arquivo;
$imagem = ImageCreateFromJpeg($this->imagem);
$imagem = ImageCreateFromPng($this->imagem);


// 2 - Recupearar os valores da dimens√µes da imagem
$imgw = imagesx($imagem);
$imgh = imagesy($imagem);

// 3 - Encontra o numero total de pixel existente na imagem
$n = $imgw * $imgh;

$histogramas = array();

// 4 - Percorre a matrix da imagem linha e coluna
for ($i=0; $i < $imgw; $i++) {
    for ($j=0; $j < $imgh; $j++) {

        // 5 - Recuperar o valor RGB de cada pixel
        $rgb = ImageColorAt($imagem, $i, $j);

        // 6 - Extrair os valores hexadecimal para cada cor R,G,B
        $r = ($rgb >> 16) & 0xFF;
        $g = ($rgb >> 8) & 0xFF;
        $b = $rgb & 0xFF;

        // 7 - Recuperar o valor em cores do RGB exemplo de 0 a 255
        $valor = round(($r + $g + $b) / 3);

        // 8 - Acidiona em uma lista todos os valores encontrados, para gerar os pontos do histograma
        $histogramas[$valor] += $valor / $n;
    }
}